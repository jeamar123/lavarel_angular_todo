<div  mytransaction-directive>
  <div class="transactions-container">
    <div>
      <div class="tbl-header-container">
        <p class="section-title">Transactions</p>
        <div class="btn-option-container">
          <button class="btn" ng-click="showForm()"><i class="fa fa-plus"></i></button>
          <button class="btn btn-red" ng-click="resetAllData()"><i class="fa fa-refresh"></i></button>
        </div>
      </div>
      
      <input type="text" ng-model="search" placeholder="Search . . ."> <br><br>

      <div class="table-container">
        <table>
          <thead>
            <tr>
              <!-- <th>
                <input type="checkbox">
              </th> -->
              <th>ID</th>
              <th>Full Name</th>
              <th>Service</th>
              <th>Payment Due Date</th>
              <th>Amount Due</th>
              <th>Payment Amount</th>
              <th>Payment Status</th>
              <th>Payment Date</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="list in transactionArr | filter: search">
              <!-- <td>
                <input type="checkbox">
              </td> -->
              <td >MED000<span ng-bind="list.id"></span></td>
              <td ng-bind="list.name | uppercase"></td>
              <td ng-bind="list.service"></td>
              <td ng-bind="formatMomentDate(list.payment_due, ['DD/MM/YYYY', 'YYYY-MM-DD'], 'DD/MM/YYYY')"></td>
              <td>
                <!-- <span>SGD</span> -->
                <span ng-bind="list.payment_amount_due | number:2 "></span>
              </td>
              <td >
                <!-- <span>SGD</span> -->
                <span ng-bind="list.payment_amount | number:2 "></span>
              </td>
              <td>
                <div class="paid" ng-if="list.paid == true">PAID</div>
                <div class="pending" ng-if="list.paid == false">PENDING</div>
              </td>
                <td>
                  <div ng-if="list.payment_date != null" ng-bind="formatMomentDate(list.payment_date, ['DD/MM/YYYY', 'YYYY-MM-DD'], 'DD/MM/YYYY')"></div>
                </td>
              <td>
                <div class="action-drop-wrapper" x-data="{ open: false }">
                  <i class="fa fa-caret-down" @click="open = true"></i>
                  <div class="action-drop"  x-show="open" @click.away="open = false" @click="open = false">
                    <div class="action-div" ng-click="updateTransaction(list)">Update Transaction</div>
                    <div class="action-div" ng-click="deleteTransaction(list)">Delete Transaction</div>
                    <div class="action-div" ng-click="modalForm(list)" ng-if="list.paid == false">Record Payment</div>
                    <div class="action-div" ng-if="list.paid == true" ng-click="removePayment(list)">Remove Payment</div>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  

    <!-------------------- Main Form ----------------------->
    <div>
      <form class="form">
        <h3>{{ isUpdateTransactions ? 'Update' : 'Create' }} Transaction</h3>
  
        <div class="input-div">
          <label for="">Name</label>
          <input type="text" ng-model="newTransaction.name">
        </div>
  
        <div class="input-div">
          <label for="">Service</label>
          <select ng-model="newTransaction.service">
            <option value=""></option>
            <option value="General Practice">General Practice</option>
            <option value="Health Screening">Health Screening</option>
            <option value="Traditional Chinese Medicine">Traditional Chinese Medicine</option>
            <option value="Medical Specialist">Medical Specialist</option>
            <option value="Dental">Dental</option>
          </select>
        </div>
  
        <div class="input-div">
          <label for="">Payment Due Date</label>
          <input type="text" class="datepicker" ng-model="newTransaction.payment_due ">
        </div>
  
        <div class="input-div">
          <label for="">Payment Due</label>
          <input type="number" min="0" ng-model="newTransaction.payment_amount_due" >
        </div>
  
        <div class="input-div text-right">
          <button class="btn" ng-disabled="!newTransaction.name || !newTransaction.service || !newTransaction.payment_due || !newTransaction.payment_amount_due" 
          ng-click="addNewTransaction(newTransaction)">{{buttonName}}</button>
        </div>
      </form>
    </div>
  </div>



  <!-------------------- Modal Form ----------------------->
  <div class="formModal">
    <div class="formModal-container">
      <div class="closeContainer">
        <p ng-click="modalClose()">x</p>
      </div>
      <form>
        <label for="">Payment Date</label><br>
        <input type="text" class="datepicker" ng-model="payment.payment_date"><br>
        <label for="">Payment Amount</label><br>
        <input type="text" ng-if="record_payment.status == false">
        <input type="text" ng-if="record_payment.status != false" ng-model="payment.payment_amount">
        <button class="btn" ng-click="addPayment(payment)"><i class="fa fa-plus"></i>&nbsp;Add Payment</button>
      </form>
    </div>
  </div>

  
  </div>
  
  <style scoped>
    @import url('../../templates/myTransaction/style.css'); 
  </style>